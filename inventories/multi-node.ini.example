# Multi-Node HA k3s Cluster Configuration
# This configuration creates a highly available cluster with multiple control plane nodes
# Requires odd number of servers (3, 5, 7, etc.) for etcd quorum

[servers]
# Control plane nodes (must be odd number for HA etcd)
k3s-server-01 ansible_host=192.168.1.10 ansible_user=davidg
k3s-server-02 ansible_host=192.168.1.11 ansible_user=davidg  
k3s-server-03 ansible_host=192.168.1.12 ansible_user=davidg

[agents]
# Worker nodes (any number)
k3s-worker-01 ansible_host=192.168.1.20 ansible_user=davidg
k3s-worker-02 ansible_host=192.168.1.21 ansible_user=davidg
k3s-worker-03 ansible_host=192.168.1.22 ansible_user=davidg

# Group aliases for backward compatibility
[homelab:children]
servers
agents

# All nodes (servers + agents)
[all:children]
servers
agents

# Cluster configuration variables
[all:vars]
# k3s version to install
k3s_version=v1.29.1+k3s1

# Cluster token (change this!)
k3s_token=your-secure-cluster-token-here

# Network configuration
k3s_cluster_cidr=10.42.0.0/16
k3s_service_cidr=10.43.0.0/16

# Additional k3s server args
k3s_server_args="--disable=traefik --disable=servicelb --write-kubeconfig-mode=644"

# Additional k3s agent args  
k3s_agent_args=""

# Node labels (optional)
# k3s_node_labels="node.example.com/type=worker"